pipeline{
    agent any


stages {

        stage('welcome to ci pipeline') {
        steps {
        script {
        firstName = input(
       message: 'what is your name?',
       ok: 'Submit'
       parameters: [string(defaultValue: 'Dave', name: 'FIRST_NAME', trim:true)]
        )
       }
      }
     }

        stage('output'){
        agent any

        steps{
        script {
        echo "Good morning, firstName"
        }

        sh '''

       hostname


        }
        }



        stage('git check-out') {
            steps {
                  checkout changelog: false, poll: false, scm: [$class: 'GitSCM', branches: [[name: '*/hansn-feature']], extensions: [], userRemoteConfigs: [[credentialsId: 'ibt', url: 'https://github.com/IBT-learning/ibt-maven.git']]]

            }
        }

        stage('Clean') {
                    steps {
                         sh 'mvn clean'

                    }
                }

        stage('Validate') {
            steps {
                 sh 'mvn validate'

            }
        }

           stage('continue'){
                        input{
                        message "should we proceed"
                        ok "Yes, proceed"
                        }
                        steps{
                        echo 'deploy pipeline'
                        }
                        }

        stage('compile') {
                    steps {
                        sh 'mvn compile'

                    }
                }

                stage('continue'){
                input{
                message "should we proceed"
                ok "Yes, proceed"
                }
                steps{
                echo 'deploy pipeline'
                }
                }

          stage('adding SonarQube scanner') {
                environment{
                     scannerHome = tool 'ibt-sonarqube';
                }
                    steps{
                    withSonarQubeEnv(credentialsId: 'SQ-student', installationName: 'IBT sonarqube') {
                      sh "$scannerHome/bin/sonar-scanner"
                    }
                   }
                  }

        stage('package') {
                     steps {
                        sh 'mvn package'

                     }
                  }

        stage('CI success') {
                    steps {


                    echo 'done'
                    }
                }
    }
}