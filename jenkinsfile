pipeline {
    agent { label 'UX_IBT'}
    tools { maven 'maven_3.8'}
    environment {
        verison = '1.3.0'
        run = 'true'
    }
    parameters {
        string(name:'Branch_Name', defaultValue: 'main', description: 'enter branch name to build')
    }





    stages {
        stage('Hello') {
            steps {
                echo 'Hello World'
                }
            }
   // stage('Git Checkout') {
     //   steps{


      //  checkout changelog: false, poll: false, scm: scmGit(branches: [[name: $Branch_Name]], extensions: [], userRemoteConfigs: [[credentialsId: '975a8fc7-2f3f-484e-9cc5-2e735cda2ec7', url: 'https://github.com/IBT-learning/ibt-maven.git']])
      //  }

  //  }



      stage('List files'){
      when {
            expression{
                env.Branch_Name == 'feature/leroy'
             }
      }
            steps{
                sh 'ls'
            }

        }

            stage('invoke maven'){
                steps{
                    sh 'mvn --version'
                    echo "${env.run}"
                    echo "${env.version}"
                    sh 'echo $version'
                    script {
                        print env.version
                    }
                }
            }





          stage('testing webhook'){
                  steps {
                      echo 'success webhook'


          }        }
      }
               post {
                        always {
                            echo "hi i am going to run everytime"
                        }
               }

   }










