pipeline {
    agent any
    tools { maven 'maven_3.8' }
    environment {
        version = '1.3.0'
        run = 'true'
    }
    parameters {
        string(name:'Branch_Name', defaultValue: 'main', description: 'enter branch name to build')
    }

    stages {
        stage('Hello') {
            steps {
                echo 'Hello World'
            }
        }
    stage('Welcome') {
            steps {
                echo 'Welcome Home'
            }
         }
       stage('Git Checkout') {
         steps {
           checkout scmGit(branches: [[name: '$Branch_Name']], extensions: [], userRemoteConfigs: [[credentialsId: 'jenkins-josias', url: 'https://github.com/IBT-learning/ibt-maven.git']])
         }
       }
       stage('List of files'){
       when {
            expression{
                env.Branch_Name == 'main'
            }
       }
        steps{
         sh'ls'
        }
      }
        stage('testing webhook'){
               steps{
                  echo "success webhook"
        }
      }
      stage('invoke python'){
            steps{
                sh 'pwd'
            }
      }
      stage('invoke maven'){
        steps{
           sh "mvn --version"
        }
      }
      stage('test stage') {
         steps {
             echo 'hello'
             echo $(env.version)
             echo $(env.run)
             sh 'echo $version'
             script {
              'print env.version'
         }
      }
    }
}
}